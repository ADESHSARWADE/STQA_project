<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Search for Student</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />

    <style>
      body {
        background-color: #f1f1f0;
        background-image: url("https://ums.paruluniversity.ac.in/Default/assets/pages/img/1.jpg");
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
        color: #000;
      }

      body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #f1f1f0;
        opacity: 0.1;
        z-index: -1;
      }

      .main-wrapper {
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        padding: 2rem;
        /* REMOVED: padding-bottom to allow content to move down */
      }

      .pu-logo {
        display: block;
        margin: 0 auto 1.5rem auto;
        max-width: 250px;
        height: auto;
        mix-blend-mode: multiply;
        flex-shrink: 0;
      }

      .main-card {
        margin-top: auto;
        margin-left: auto;
        margin-right: auto;
        /* MODIFIED: Increased this value to push the search bar up */
        margin-bottom: 21vh;
        width: 100%;
        max-width: 800px;
        background-color: transparent;
        box-shadow: none;
        border: none;
      }

      .search-container {
        position: relative;
        max-width: 600px;
        margin: 0 auto;
      }
      .search-input {
        width: 100%;
        border-radius: 50px !important;
        border: 1px solid #dee2e6 !important;
        padding: 0.75rem 5.5rem 0.75rem 1.5rem !important;
        font-family: Arial, sans-serif;
        font-size: 1rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
      }
      .search-input:focus {
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.25);
      }
      .form-control.is-invalid:focus {
        box-shadow: 0 0 0 0.25rem rgba(220, 53, 69, 0.25);
      }

      .icon-button {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        color: #5f6368;
        background: none;
        border: none;
        padding: 0.5rem;
        font-size: 1.2rem;
        cursor: pointer;
        line-height: 1;
      }

      .clear-icon {
        right: 3.25rem;
        display: none;
      }

      .search-icon-btn {
        right: 0.75rem;
        color: #107fbe;
      }

      footer {
        text-align: center;
        flex-shrink: 0;
      }
      .footer-credit {
        display: inline-block;
        background-color: rgba(0, 0, 0, 0.7);
        color: #fff;
        padding: 0.75rem 1.5rem;
        border-radius: 50px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
      }
      .footer-credit span {
        font-weight: 300;
      }

      /* --- NEW: Styles for In-Flow Animated Flash Messages --- */
      .flash-messages-container {
        width: 100%;
        max-width: 600px; /* Match the search bar width */
        margin: 0 auto 1rem auto; /* Center it and add space below */
      }
      .flash-alert {
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        border-radius: 0.5rem;
        font-weight: 500;
        display: flex;
        align-items: center;
        animation: fadeIn 0.5s ease-in-out;
        border: none;
      }
      .flash-alert.fade-out {
        opacity: 0;
        transition: opacity 0.5s ease-out;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
    </style>
  </head>
  <body>
    <div class="main-wrapper">
      <img
        src="{{ url_for('static', filename='puloglogin.png') }}"
        class="pu-logo"
        alt="Parul University"
      />

      <div class="flash-messages-container">
        {% with messages = get_flashed_messages(with_categories=true) %} {% if
        messages %} {% for category, message in messages %}
        <div
          class="alert alert-{{ category }} alert-dismissible fade show flash-alert"
          role="alert"
        >
          <i class="bi bi-exclamation-triangle-fill me-2"></i>
          {{ message }}
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="alert"
            aria-label="Close"
          ></button>
        </div>
        {% endfor %} {% endif %} {% endwith %}
      </div>

      <div class="main-card p-0">
        <form action="{{ url_for('home') }}" method="POST" class="mt-3">
          {{ form.csrf_token }}

          <div class="mb-3 search-container">
            {{ form.enrollment_no( class="form-control search-input",
            placeholder="Search Student by Enrollment No", id="searchStudentUID"
            ) }}

            <button
              type="button"
              class="icon-button clear-icon"
              id="clearBtn"
              data-bs-toggle="tooltip"
              title="Clear"
            >
              <i class="bi bi-x-lg"></i>
            </button>

            <button
              type="submit"
              class="icon-button search-icon-btn"
              data-bs-toggle="tooltip"
              title="Search"
            >
              <i class="bi bi-search"></i>
            </button>
          </div>
        </form>
      </div>

      <footer>
        <div class="footer-credit">
          <span
            >Developed by: Adesh Sarwade | Jaydeep Ukirde | Pranav Rakshe</span
          >
        </div>
      </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      // (Your existing script for search bar and tooltips remains the same)
      const searchInput = document.getElementById("searchStudentUID");
      const clearBtn = document.getElementById("clearBtn");
      searchInput.addEventListener("input", () => {
        clearBtn.style.display = searchInput.value ? "block" : "none";
      });
      clearBtn.addEventListener("click", () => {
        searchInput.value = "";
        clearBtn.style.display = "none";
        searchInput.focus();
      });
      const tooltipTriggerList = document.querySelectorAll(
        '[data-bs-toggle="tooltip"]'
      );
      const tooltipList = [...tooltipTriggerList].map(
        (tooltipTriggerEl) => new bootstrap.Tooltip(tooltipTriggerEl)
      );

      // Auto-dismissing flash messages script (can stay the same)
      document.addEventListener("DOMContentLoaded", () => {
        const flashAlerts = document.querySelectorAll(".flash-alert");
        flashAlerts.forEach((alert) => {
          setTimeout(() => {
            alert.classList.add("fade-out");
            setTimeout(() => {
              alert.remove();
            }, 500);
          }, 5000);
        });
      });
    </script>
  </body>
</html>
